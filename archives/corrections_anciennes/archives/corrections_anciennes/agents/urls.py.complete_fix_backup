# agents/urls.py
from django.urls import path
from . import views
from .views import CreerBonSoinView  # Import explicite de la vue classe

app_name = 'agents'

urlpatterns = [
    # Dashboard et pages principales
    path('', views.dashboard_agent, name='dashboard'),
    path('dashboard/', views.dashboard_agent, name='dashboard_agent'),
    path('dashboard-class/', views.DashboardView.as_view(), name='dashboard_class'),
    
    # Gestion des membres
    path('membres/', views.liste_membres, name='liste_membres'),
    path('verification-cotisation/', views.verification_cotisation, name='verification_cotisation'),

    path('verifier-cotisation/<int:membre_id>/', views.verifier_cotisation, name='verifier_cotisation'),
    
    # Bons de soin
    path('bons-soin/', views.historique_bons_soin, name='historique_bons'),
    # CHOISIR UNE SEULE VERSION POUR creer-bon-soin/ :
    # Version formulaire HTML (recommandée)
    path('creer-bon-soin/', CreerBonSoinView.as_view(), name='creer_bon_soin'),
    # OU version API JSON (décommenter si préférée)
    # path('creer-bon-soin-api/', views.creer_bon_soin, name='creer_bon_soin_api'),
    
    # Notifications
    path('notifications/', views.agents_notifications, name='notifications'),
    path('notifications/list/', views.NotificationListView.as_view(), name='notification_list'),
    path('notifications/<int:notification_id>/marquer-lue/', views.marquer_notification_lue, name='marquer_notification_lue'),
    path('notifications/marquer-toutes-lues/', views.marquer_toutes_notifications_lues, name='marquer_toutes_notifications_lues'),
    
    # API Endpoints
    path('api/derniers-bons/', views.api_derniers_bons, name='api_derniers_bons'),
    path('api/stats-quotidiens/', views.api_stats_quotidiens, name='api_stats_quotidiens'),
    path('api/recherche-membres/', views.api_recherche_membres, name='api_recherche_membres'),
    path('api/bons/<int:bon_id>/', views.api_bon_details, name='api_bon_details'),
]